!function(p,n,a){"use strict";function t(){p(n).trigger("pumConversion")}p.fn.popmake.conversion_trigger=null,p.fn.bindFirst===a&&(p.fn.bindFirst=function(n,e){var a,t,o=p(this);o.unbind(n,e),o.bind(n,e),(t=(a=p._data(o[0]).events)[n]).unshift(t.pop()),a[n]=t}),p.fn.outerHtml===a&&(p.fn.outerHtml=function(){var n=p(this).clone();return p("<div/>").append(n).html()}),p(n).on("pumConversion",function(){var n=PUM.getPopup(p.fn.popmake.last_open_popup),e={action:"popmake_pa",popup_id:n.data("popmake").id,event_type:"conversion",open_event_id:n.data("open-event-id"),trigger:p.fn.popmake.conversion_trigger,_ajax_nonce:popmake_pa_nonce};p.ajax({type:"POST",dataType:"json",url:ajaxurl,async:!1,data:e})}),p(".pum").on("pumInit",function(){var n=PUM.getPopup(this),e=n.data("popmake").meta.convert_on;if(function(n){function e(){var n=p("form",a);n.length&&!p('[name="popmake_pa_conversion_check"]',n).length&&(n.hasClass("pum_sub_form")||n.find(".gform_body").length||n.hasClass("ninja-forms-form")||n.parents(".nf-form-wrap").length||n.hasClass("wpcf7-form"))&&(n.addClass("popmake_pa"),n.append('<input type="hidden" name="_popmake_pa_conversion_check" value="'+t.id+'"/>'),n.append('<input type="hidden" name="_popmake_pa_open_event_id" value=""/>'),n.bindFirst("submit",function(){p('[name="_popmake_pa_open_event_id"]',n).val(a.data("open-event-id")),p.fn.popmake.conversion_trigger=n.attr("id")||p.fn.popmake.utilities.getXPath(n)}))}var a=p(n),t=a.data("popmake");"undefined"!=typeof Marionette&&"undefined"!=typeof nfRadio&&new(Marionette.Object.extend({initialize:function(){this.listenTo(nfRadio.channel("form"),"render:view",this.initAction)},initAction:e})),e()}(this),e!==a&&""!==e)switch(e){case"form_submit":n.find("form").filter(":not(.popmake_pa)").on("submit.popmake_pa",function(){p.fn.popmake.conversion_trigger=p(this).attr("id")||"Form Submit",t(),p(this).off("submit.popmake_pa")});break;case"button_click":n.find("button, .button, .btn").on("click",function(){console.log(p(this)),p.fn.popmake.conversion_trigger=p(this).attr("id")||"Button Click",t()});break;case"link_click":n.find("a").on("click",function(){p.fn.popmake.conversion_trigger=p(this).attr("id")||"Link Click",t()})}}).on("pumBeforeOpen.analytics",function(){var e=PUM.getPopup(this),n={action:"popmake_pa",popup_id:e.data("popmake").id,event_type:"open",trigger:null,_ajax_nonce:popmake_pa_nonce},a=null;try{a=p(p.fn.popmake.last_open_trigger)}catch(n){a=p()}a.length?n.trigger=a.eq(0).outerHtml():null!==p.fn.popmake.last_open_trigger&&(n.trigger=p.fn.popmake.last_open_trigger.toString()),p.ajax({type:"POST",dataType:"json",url:ajaxurl,data:n,success:function(n){n.success&&0<n.event_id?e.data("open-event-id",n.event_id):e.data("open-event-id",null)}}),p(window).one("unload.popmake_pa",function(){n={action:"popmake_pa",popup_id:e.data("popmake").id,event_type:"close",open_event_id:e.data("open-event-id"),trigger:"Browser Closed",_ajax_nonce:popmake_pa_nonce},p.ajax({type:"POST",dataType:"json",url:ajaxurl,async:!1,data:n})})}).on("pumBeforeClose.analytics",function(){var n=PUM.getPopup(this),e={action:"popmake_pa",popup_id:n.data("popmake").id,event_type:"close",open_event_id:n.data("open-event-id"),trigger:p.fn.popmake.last_close_trigger,_ajax_nonce:popmake_pa_nonce};p(window).off("unload.popmake_pa"),p.ajax({type:"POST",dataType:"json",url:ajaxurl,data:e})})}(jQuery,document);
;